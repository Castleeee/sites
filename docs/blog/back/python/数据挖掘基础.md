---
title: 数据挖掘基础
date: 2018-1-1 20:38:45
categories: backEnd
tags:
- 数据挖掘
- python
- 后端
- 语言基础
---




<div align="center"><h1> Numpy</h1></div>

## Numpy
import numpy as np
### 数据类型

numpy中可以有如下数据类型
可以接收list，tuple

|类型|描述|
|:--|:---:|
|bool|用1位存储的布尔类型（值为TRUE或FALSE）|
|inti|由所在平台决定其精度的整数（一般为int32或int64）int81字节整数|
|int162|字节整数int324字节整数int648字节整数|
|uint81|字节无符号整数|
|uint162|字节无符号整数uint324字节无符号整数uint648字节无符号整数|
|float16|半精度浮点数（16位），1位符号，5位指数，10位尾数|
|float32|单精度浮点数（32位），1位符号，8位指数，23位尾数|
|float64/float|双精度浮点数（64位），1位符号，11位指数，52位尾数|
|complex64|复数，分别用32位表示实部和虚部|
|complex128/complex| 复数，分别用64位表示实部和虚部|

--引自python数据分析三剑客

### 创建数组
- **`np.arry()`** 
    - **np.arry([[数组],[数组]],dtype=np.表中数据类型)**
    - 默认元素类型为int32,可以使用dtype指定
- **`np.arange(n)`** 
    - np.arange(x,y,dtype=np.表中数据类型)
    - 创建从x到y的一维数组。默认从0开始
- **`np.linspace(x,y,n)`** 
    - 从x到y生成n个等距离浮点数一维数组
- **`np.zeros((x,y)，n)/np.ones((x,y))`** 
    - 生成x行y列的全0/1矩阵
- **`np.full((x,y))/np.empty((x,y))`** 
    - 生成x行y列的全n/随机未初始化矩阵
- **`np.eye(x,k,dtype=np.表中数据类型)`** 
    - 生成x行x列的矩阵
    - 默认情况下输出的是对角线全1，其余全0的方阵，如果k为正整数，则在右上方第k条对角线全1其余全0，k为负整数则在左下方第k条对角线全1其余全0。

- **`np.random.random((2,3))`** 
    - 2行3列的0-1之间的随机浮点数
-  **`np.random.randint(0,10,(3,2))`** 
    - 0-10之间的两行三列的随机整数    
- **`numpy.asarray(iterable, dtype = None, order = None) `**   
    - 传入列表, 列表的元组, 元组, 元组的元组, 元组的列表，多维数组，指定类型和行列优先("C","F")
- **`numpy.fromiter(iterable, dtype, count=-1)`**  
    - 传入可迭代对象，默认-1数据全部读取
- **`np.logspace(start, stop, num=50, endpoint=True, base=10.0, dtype=None)`** 
    - start 序列的起始值
    - stop 	序列的终止值为
    - num 	要生成的等步长的样本数量，默认为50
    - endpoint 	该值为 ture 时，数列中中包含stop值，反之不包含，默认是True。
    - base 	对数 log 的底数。？？
    - dtype 	ndarray 的数据类型
### 数组的属性
属性不是函数；NumPy 数组的维数称为秩（rank），一维数组的秩为 1，二维数组的秩为 2，以此类推。在 NumPy中，每一个线性的数组称为是一个轴（axis），也就是维度（dimensions）
- **`ndarray.ndim`**  	秩，即轴的数量或维度的数量
- **`ndarray.shape `** 	数组的维度，对于矩阵，n 行 m 列
- **`ndarray.size`**  	数组元素的总个数，相当于 .shape 中 n*m 的值
- **`ndarray.dtype`**  	ndarray 对象的元素类型
- **`ndarray.itemsize`**  	ndarray 对象中每个元素的大小，以字节为单位
- **`ndarray.flags`**  	ndarray 对象的内存信息
- **`ndarray.real `** 	ndarray元素的实部
- **`ndarray.imag `** 	ndarray 元素的虚部
### 四则运算
**a=np.array([1,2,3,4])**<br/>
**b=np.array([10,20,30,40])**

加减，次方，相乘，每一项都分别相乘,乘数字也是一样的
- <strong>a+b->[11 22 33 44]</strong> 
- <strong>a**2->[ 1  4  9 16]</strong>
- <strong>a*b->[ 10  40  90 160]</strong>

把每一项都做sin操作，把每一项都求sin，cos，tan，cot同理
- **x=np.sin(a)** 

比较，返回一个同等规模的矩阵，该矩阵的项为每一项进行比较操作之后的结果，满足就为Ture，不满足就False
- **x=(b<30)**

矩阵相乘的两种方法
- **np.dot(a1,b1)==a1.dot(b1)**

求一个数组所有元素的
- **`x=np.max(a)`** 最大
- **`x=np.min(a)`** 最小
- **`x=np.sum(a)`** 和 

分别对行/列（用axis控制）求最大值最小值求和   
- **`x=np.max(a,axis=1)`** 对行求最大
- **`x=np.min(a,axis=0)`** 对列求最小
- **`x=np.sum(a,axis=0)`** 对列求和

判等
- **（a==b）.all()**
    - 直接使用（a==b）是个同规模TorF矩阵，需要使用all
### 切片索引
切片和py中的list十分相似<br/>
**x=l[开始:结束:步长]** <br/>
**逆序x[::-1]** <br/>
切片还可以包括省略号`…`来使选择元组的长度与数组的维度相同,这个地方还是有代码说服力强。
```py
省略号切片
```
<h4>整数数组索引</h4><br/>

获取数组中(0,0),(1,1)和(2,0)位置处的元素
```py
x = np.array([[1,  2],  
              [3,  4],  
              [5,  6]]) 
y = x[[0,1,2],  [0,1,0]]  
```

<h4>布尔索引</h4><br/>

<h4>花式索引</h4><br/>


### 矩阵操作
重新分配维度
- **`x=l.reshape(3,2`** 3行两列
- **`a.resize(3,2)`** 和reshap一样但不反回会直接改变原数组
一维化
- **`x=a.ravel()`** 
转置
- **`x=a.transpose()`** 
- **`a.T`** 
轴对称
**`x=a.swapaxes()`** 




### 合并拆分

## Pandas
import pandas as pd
## Matplotlib
**`import matplotlib.pyplot as plt`**<br/>
Matplotlib允许我们配置绝大部分的东西，图片大小和分辨率（dpi）、线宽、颜色、风格、坐标轴、坐标轴以及网格的属性、文字与字体属性等。不过默认的已经够你玩的了很少用到，用到再去查就好。
### 最基本的图形
:::tip
- 创建Figure对象----相当于一张画布；
- 用subplots()等函数创建分区----将画布分为若干个部分，也可以是一个部分；
- 在执行上一步的同时创建了Axes容器对象----相当于同时在分区上创建坐标系；
- Axes对象----坐标系的各个组成部分，可以被单独操作、设置；
- 在Axes 容器对象内绘图,保存
:::
<br/>
jupyter 使用

<div align='center'><img src='./static/截图2019-03-31_13-40-55.png' style='hight:500px'/></div>

使用魔法命令在第一行 `%matplotlib` 运行一下，会出现一个RStudio的窗口，你所做的改动会实时的展现出来。


通过画一个最基本的图形看看使用pyplot的流程使用MATLAB风格<br/>PS:如果你是在jupyter使用了上面的魔法命令，那就不用show<br/>
```py
import numpy as np
import matplotlib.pyplot as plt
x = np.arange(0, 2*np.pi, 0.01)//生成np数组
y = np.sin(x)//生成np数组
plt.plot(x, y)//生成plt
plt.show()//显示
```
生成一个pyplot对象plt，每一个程序文件只需要一个 `plt.show()` <br/>
:::danger 
matplotlib统一使用utf-8编码，所有的中文要在utf-8环境下显示，开头加入注释全局使用utf-8，设置默认字体。<br/>
**from pylab import mpl <br/>
mpl.rcParams['font.sans-serif'] = ['FangSong'] # 指定默认字体<br/>
mpl.rcParams['axes.unicode_minus'] = False     # 解决保存图像时'-'显示为方块的问题<br/>**
:::

<h4>创建Figure对象</h4><br/>

这东西类似于一张画布，**`fig=plt.figure()`** or实例化 **`plt.Figure()`**（一般不这样干<br/>
参数:<br/>
fig=figure(num=None, figsize=None, dpi=None, facecolor=None, edgecolor=None, frameon=True)
- ***num***:图像编号或名称，数字为编号 ，字符串为名称
- ***figsize***:指定figure的宽和高，单位为英寸；
- ***dpi*** 参数指定绘图对象的分辨率，即每英寸多少个像素，缺省值为80
- ***facecolor***:背景颜色
- ***edgecolor***:边框颜色
- ***frameon***:是否显示边框

使用fig对象+面向对象风格画图
```py
import numpy as np
import matplotlib.pyplot as plt
x=np.linspace(0,2*np.pi,100)
y1=np.sin(x)
y2=np.cos(x)
fig=plt.figure()
ax=fig.add_axes([0.1,0.1,0.8,0.8])
ax.plot(x,y2)
ax.plot(x,y1)
fig.savefig("x.png")#直接在程序目录下保存
```

plt函数和ax对象方法:
<div align=center>

|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plt函数&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ax对象方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
|:---:|:---:|
|plt.plot()|ax.plot()|
|plt.legend()|ax.legend()|
|plt.xlabel()|ax.set_xlabel()|
|plt.ylabel()|ax.set_ylabel()|
|plt.grid()|ax.grid()|
|plt.xlim()|ax.set_xlim()|
|plt.ylim()|ax.set_ylim()|
|plt.title()|ax.set_title()|

</div>

### 标题和坐标系
需要更高定制性参见matplotlib.ticker<a href='http://matplotlib.org/api/ticker_api.html'>官方文档</a>
- **`plt.title`**(u'正弦曲线', fontdict={'size':20})      
    - 设置标题
- **`plt.xlabel`**(u'弧度', fontdict={'size':16})         
    - 显示横轴名称
- **`plt.ylabel`**(u'正弦值', fontdict={'size':16})       
    - 显示纵轴名称
- **`plt.grid`**(color="gray")
    - 显示网格   
    - 网格参数列表


<div align=center>

|参数|说明|
|:----:|:----|
|axis|默认为'both'，可以设置为'x'or'y',让你的网格线垂直于X轴还是Y轴|    
|color|接受16进制颜色值或指定颜色|
|linestyle|线型参考 *线型表* |
|linewidth|表格线宽度，接受整数|

***线型表***

|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dashed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dashdot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dotted&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
|:----:|:----:|:---:|:---:|
|-|--|-.|:|
|实线|小段虚线|点段虚线|点虚线|

</div>

- **`plt.xlim`**((2,10))       
    - 为这个坐标系设置范围元组
    - 有返回值一个元组范围
    - ylim同理
- **`plt.xticks`**(np.linspace(0,5,11)))       
    - 为这个坐标系设置刻度
    - 会自己分配间距等等
    - 不一定位数越高越精确，找合适的



```py
fig=plt.figure()
ax=fig.add_axes([0.1,0.1,0.8,0.8])
x=np.arange(0.0,5.0,0.2)
y=np.exp(-x) *np.cos(2*np.pi*x)
ax.grid(color='gray')#灰色的网格线
ax.plot(x,y)
ax.set_xlabel("it is x")#设置x轴的标注
ax.set_xlim(-2,10)#设置了x轴范围
#ax.set_ylim(-2,10)
```


<div align=center ><img src="./static/屏幕快照 2019-04-05 下午3.40.45.png" style="height: 250px"/></div> 

<br/>
刻度是由短线和短线附近的文本组成的，这些对象都有对应的设置器。

- locator 对象，描述刻度“刻线”，当执行ax.yaxis.set_major_locator（plt.NullLocator()）之后，刻线不在在了，即使有“标示”也没有意义了，正所谓“皮之不存，毛将薄附”。
- formater 对象描述刻度的“标示”，所以ax.xaxis.set_major_formatertplt.NullFomater()）之后X轴没有了标示，只有刻线了----刻线可以单独存在，类似于刻度尺，在刻度尺上不是每条刻线都有标示。    

### 绘制子图

插曲 ***显示图片*** <br/>
代码我放这里了，我也没搞懂原理：

```py
from sklearn.datasets import fetch_olivetti_faces
faces=fetch_olivetti_faces().images
fig,ax=plt.subplots(5,5,figsize=(5,5))
fig.subplots_adjust(hspace=0,wspace=0)
for i in range(5):
    for j in range(5):
        ax[i,j].xaxis.set_major_locator(plt.NullLocator())
        ax[i,j].yaxis.set_major_locator(plt.NullLocator())
        ax[i,j].imshow(faces[10*i+j],cmap="bone")
        
```
<div align=center ><img src="./static/屏幕快照 2019-04-05 下午11.01.27.png" style="height: 300px"/></div>


- **`fig,ax=plt.subplots(2,1,sharex='col',sharey='row')`**
    - 0轴方向为2，1轴方向为1生成2x1个坐标系分区
    - 返回值有两个，一个是Figure和Axes容器，容器是一个序列对象，里面有好多ax坐标系
    - 可以直接取出对象画图ax[0],plot(np.linspace(0,2*np.pi,10),np.sin(np.linspace(0,2 *np.pi,10)))
此处应该有图<br/>


- **`fig.subplots_adjust(left=None,bottom=None,right=None,wspace=None,hspace=None)`**
    - wspace,hspace是分区之间空隙宽和高
```py
练习留坑p192
```
此处应该有图<br/>

程序的解释：<br/>
刻度轴是有主次之分的，“from matplotlib.ticker import MultipleLocator，FormatStrFormatter”所引入的MultipleLocator类就是用于设置刻度的倍数的，例如①中的含义就是X轴的“主刻线”是20的倍数，即对于
程序中，X轴上每20是一个“主刻线”。FormatStrFormatter用于设置“标示”的显示格式，例如②中规定了“主刻度”的“标示”的显示格式为小数点后要有1位小数。<br/>
①和②所建立的对象分别作为参数用于③和④。ax.xaxis得到的是X轴Axes对象，它具有以下两个方法：set_major_locator()设置“主刻线”；set_major_formater()设置相应的“标示”。
⑤中的set_major_locator()设置“次刻线”，因为“次刻线”不需要标示，所以就没有使用set_major_formatter()函数，不过也可以尝试使用。<br/>用同样的方法可以设置Y轴的刻度。
最后，⑥通过循环ax.xaxis.get_major_ticks()得到x轴的主刻度，然后在⑦中对每个主刻度的“标示”字号进行设置，比默认字号大一
<br/>
- **`plt.subplot(x,y,z....)`**
    - 等价于fig.add_subplot()
    - 获得分区的某一个子图给plt
    - 接下来可以设置plt.text(0.2*x*,0.5*y*,*str*('xxx'),fontsize=18,withdash=False,ha='center',with)文字

此处应该有图<br/>


***画一个小坐标系***<br/>

```py
留坑p196
```
此处应该有图<br/>
ax.shape可以查看当前的对象容器的序列，通过下标拿到Axes对象可以做一些设置。不使用多个画布分区的时候，可以在同一张画布上有多个坐标系
<br/>
***布局***
- g=**`plt.GridSpec(3,3,hspace=0.3,wspace=0.3)`**
    - 划分了3-3等格,间距为0.3，0.3
    - 使用plt.subplot(g[n:m])划分区域，见代码

```py
留坑p196
```
此处应该有图两个<br/>
### 绘图
**`plt.plot()`** or **`ax.plot()`** 函数完成
- 颜色，由 **`color='#A52A2A'`** 参数控制
    - 1.x版本和2.x(使用的)有改动，2.x变为category10调色板+hex16进制颜色值字符串控制。
    - 默认自己填充色彩
- 线型，由 **`linestyle='dashdot'`** 控制
    - 参考线型表，默认为实线
- 标注点，由 **`marker='o'`** 控制
    - 可选o圆形，D菱形，h六边形
    - **`markersize=整数int`**，标记大小
    - **`markerfacecolor=''`** 标记颜色
    - **`markerevery=[1,2,3]`** 在1，2，3处进行标记
- 线粗细，由 **`linewidth=整数int`** 控制
- 标签 **`label='起个名吧'`**
    - 给曲线一个名字，一般配合legend图例使用
```py
留坑p202
```
此处应该有图
### 图例
就右上角的小标志那个东西。<br/>

**`plt.legend(loc='upper right')`** 右上角一个小图例。

- **`loc=""`** 位置
    - 参照下表,可直接而用编号代替
- **`handle=(line1,line2)`** 给line1和line2画图例
- **`bbox_to_anchor=(x0,y0,width,height)`** 把小盒子固定在任意位置
    - x0,y0是盒子左下角相对于坐标轴左下角的位置0~1的浮点数
    - width,height是盒子宽高，也是0~1的浮点数
- **`frameon=`**
- **`fontsize=`**
- **`ncol=`**
- **`framealpha=`**
- **`shadow=`**
- **`fancybox=`**
- **`borderpad=`**

<div align='center'>

|名称&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|编号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|名称&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|编号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
|:---|:---|:---|:---|
|best |0|center left|6|
|upper right |1|center right|7|
|upper left |2|lower center|8|
|lower left |3|upper center |9|
|lower right |4|center|10|
|right|5|||

</div>

:::warning
plt.plot()返回的是一个列表，注意line1，2，3的返回方式。
:::


### 散点图
```py
先鸽这
```
### 柱形图
```py
先鸽这
```
### 条形图
### 箱线图
### 饼图
### 直方图
### 三维曲线图
### 三位等高线图
### 三角形网格
## seaborn



## Scipy

## 参考资料

- <a href='http://www.runoob.com/numpy/numpy-array-attributes.html'>菜鸟numpy</a>
- python数据处理三剑客
<Valine></Valine>
